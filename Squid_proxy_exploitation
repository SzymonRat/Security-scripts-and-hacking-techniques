
If I type in the browser 
<victim_ip>:<proxy_port>
e.g 
10.10.10.21:3128
 I will get an error but I can access the proxy port by going to the BurpSuite -> ‘User Options’ -> ‘Upstream Proxy Servers’ ->’Add’ -> ‘Destination host: *’ -> ‘Proxy Host: <ip_victim>’ ->’Proxy port: <victim_port>’
And now in the browser: 
127.0.0.1:80 ( and I accessed the proxy port)


If I want to  brute-force hidden directories there are two ways and I need to launch them simultaneously cuz they provide different results :

Go to the BurpSuite and add a new proxy 
127.0.0.1:80 -> 127.0.0.1:80
Dirb http://127.0.0.1

                                                And

Dirb http://<victim_ip> -p <victim_ip>:3128



Important file “squid.conf” - this file may contain cache_mgr password and with this password I can access squid administrator panel

Curl –-user ‘:<password_from_squid_config>’ http://<victim_ip>:3128/squid-internal-mgr/menu



I can use squid to get an access to the box via internally available SSH – all I need is valid SSH credentials (requires:  SSH credentials  )  

 Nano /etc/proxychains.conf
Comment the current one
Http <victim_ip> <proxy_port>
Now I can ssh to the box
Proxychains ssh <user>@127.0.0.1


Create a proxy chain to scan the internal network    (requires: IP  of the boxes in the internal network)

 cd /etc/
nano proxy-squid.conf


strict_chain
proxy_dns
[ProxyList}
http <external_ip_vicitm> 3128
http 127.0.0.1 3128
http <internal_ip_you_believe_is_proxy> 3128

proxychains -f proxy-squid.conf nmap —top-ports 1000 -sT -Pn <other_internal_ip_you_believe_are_actual_targets>
If you didn’t get any results, just change IP address you believe is a proxy and try again and again 
